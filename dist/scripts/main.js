"use strict";for(var mainElement=document.getElementsByTagName("main")[0],articleContainer=document.getElementById("article-container"),articles=articleContainer.querySelectorAll("#article-container > article"),mainFooter=document.querySelector("main footer"),articlesById={},indexByArticleId={},index=0;index<articles.length;index++){var article=articles[index],id=article.id;void 0!=id&&(articlesById[id]=article,indexByArticleId[id]=index)}var articleIndex=0;function goToNextArticle(){if(setSelectionPanelStatus(!1),articleContainer.classList.add("animation-active"),void 0!=articles[++articleIndex]){articleContainer.style.left=-100*articleIndex+"vw",checkAndSetBlurButtonStatus(),onSwitchArticle(articles[articleIndex]);articles[articleIndex];return setTimeout(function(){articleContainer.classList.remove("animation-active")},1e3),articles[articleIndex]}return articleIndex--,!1}function goToArticleById(e){var t=indexByArticleId[e];if(void 0!=t)return void 0!=articles[articleIndex=t]?(articleContainer.style.left=-100*articleIndex+"vw",checkAndSetBlurButtonStatus(),onSwitchArticle(articles[articleIndex]),setTimeout(function(){articleContainer.classList.remove("animation-active"),setFocusPoint(articles[articleIndex])},1e3),articles[articleIndex]):(articleIndex--,!1)}function goToPreviousArticle(){return articleContainer.classList.add("animation-active"),void 0!=articles[--articleIndex]?(articleContainer.style.left=-100*articleIndex+"vw",checkAndSetBlurButtonStatus(),onSwitchArticle(articles[articleIndex]),setTimeout(function(){articleContainer.classList.remove("animation-active"),setFocusPoint(articles[articleIndex])},1e3),articles[articleIndex]):(articleIndex++,!1)}function setFocusPoint(e,t,n){if(void 0!=e){var i=e.querySelector(".overlay");if(i){var a=i.querySelector(".overlay-effect");return void 0!=t&&(a.style.left=t+"vw"),void 0!=n&&(a.style.top=n+"vw"),a.classList.add("overlay-effect--focus"),setSelectionPanelStatus(!0),!0}}return!1}function setSelectionPanelStatus(e){e?mainFooter.classList.remove("disabled"):mainFooter.classList.add("disabled")}function buttonExpanderFunction(e){var t=e.target.parentElement;t.classList.contains("wrapper")&&t.classList.remove("wrapper--not-expand")}for(var buttonExpanders=document.getElementsByClassName("button--expander"),_index=0;_index<buttonExpanders.length;_index++){var buttonExpander=buttonExpanders[_index];buttonExpander.addEventListener("click",buttonExpanderFunction)}function buttonDeExpanderFunction(e){var t=e.target.parentElement;t.classList.contains("wrapper")&&t.classList.add("wrapper--not-expand")}for(var buttonDeExpanders=document.getElementsByClassName("button--de-expander"),_index2=0;_index2<buttonDeExpanders.length;_index2++){var buttonDeExpander=buttonDeExpanders[_index2];buttonDeExpander.addEventListener("click",buttonDeExpanderFunction)}var items=[],itemsById={},itemsByElement={},blurPoints=4,maxBlurPoints=blurPoints,recognizableButtons=document.getElementsByClassName("recognizable"),unrecognizableButtons=document.getElementsByClassName("unrecognizable"),itemMenuForm=document.getElementById("item-menu__form"),legendSpans=itemMenuForm.querySelectorAll("legend span");function setBlurPoints(e){articles[articleIndex];return blurPoints=e,legendSpans[0].textContent=e,checkAndSetBlurButtonStatus(),!0}function getBlurPoints(){return blurPoints}function checkAndSetBlurButtonStatus(){var e=articles[articleIndex].querySelector(".overlay .unrecognizable");e&&(getBlurPoints()>0?e.removeAttribute("disabled"):e.setAttribute("disabled",!0))}function fillOverlay(){var e=articles[articleIndex].getElementsByClassName("overlay-effect")[0];void 0!=e&&e.classList.add("overlay-effect--fill")}function showFeedback(e,t){var n=e.getElementsByClassName("wrapper--info-balloon")[0];if(void 0!=n){var i=n.getElementsByClassName("instruction")[0];i&&i.classList.add("disabled");var a=n.getElementsByClassName("feedback")[0];a&&(a.classList.remove("disabled"),t?a.classList.add("unrecognizable"):a.classList.remove("unrecognizable"))}var r,l=document.getElementById("go-to-next-step");l.classList.remove("hidden"),r=function(t){var n=e.getElementsByClassName("wrapper--info-balloon")[0];if(void 0!=n){var i=n.getElementsByClassName("feedback")[0];i&&i.classList.add("disabled")}l.classList.add("hidden"),t.target.removeEventListener("click",r),goToNextArticle()},l.addEventListener("click",r)}function makeRecognizable(){var e=articles[articleIndex],t=e.id;fillOverlay();var n={},i=items.length;items[i]=n,itemsById[t]=n;var a=itemMenuForm.querySelectorAll("input")[i];a.setAttribute("value",t),a.removeAttribute("disabled"),showFeedback(e,!1)}function makeUnrecognizable(){var e=getBlurPoints();if(e>0){var t=articles[articleIndex],n=t.id;fillOverlay();var i={},a=items.length;items[a]=i,itemsById[n]=i;var r=itemMenuForm.querySelectorAll("input")[a];r.setAttribute("value",n),r.removeAttribute("disabled"),r.classList.add("blur"),setBlurPoints(e-1),showFeedback(t,!0)}}legendSpans[0].textContent=maxBlurPoints,legendSpans[1].textContent=maxBlurPoints;for(var _index3=0;_index3<recognizableButtons.length;_index3++){var recognizableButton=recognizableButtons[_index3];recognizableButton.addEventListener("click",makeRecognizable)}for(var _index4=0;_index4<unrecognizableButtons.length;_index4++){var unrecognizableButton=unrecognizableButtons[_index4];unrecognizableButton.addEventListener("click",makeUnrecognizable)}var itemMenuButton=document.getElementById("item-menu__button"),itemMenu=document.getElementById("item-menu");itemMenuButton.addEventListener("click",function(){itemMenu.classList.toggle("closed")}),itemMenuForm.addEventListener("change",function(e){var t=e.target;if(t.classList.contains("blur"))t.classList.remove("blur"),setBlurPoints(getBlurPoints()+1);else{var n=getBlurPoints();n>0&&(t.classList.add("blur"),setBlurPoints(n-1))}});