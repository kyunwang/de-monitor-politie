"use strict";var createBubble=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n,r,a,o,u,i,c,l,d,f,s,v,h,p,x,g,y,b,k;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return k=function(t){return t.y},b=function(t){return t.x},y=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:c).filter(function(e){return e.key==t});return 0===e.length?0:e[0].value},g=function(){n.textContent="Betrokkenen",r[0].textContent=y("Verdachte"),r[1].textContent=y("Slachtoffer"),r[2].textContent=y("Beide"),r[3].textContent=d3.sum(c,function(t){return t.value})},x=function(t){if(t.data.key&&void 0!=t.data.key){var e=vlogData.filter(function(e){return e.inciCat===t.data.key}),a=d3.nest().key(function(t){return t.involvedPeople}).rollup(function(t){return t.length}).entries(e);n.textContent="Betrokkenen bij categorie: "+t.data.key,r[0].textContent=y("Verdachte",a),r[1].textContent=y("Slachtoffer",a),r[2].textContent=y("beide",a),r[3].textContent=d3.sum(a,function(t){return t.value})}},p=function(t){d3.select(this).transition().duration(300).attr("fill",d(t.data.value)),g()},h=function(t,e){d3.select(this).transition().duration(300).attr("fill","#ffa101"),x(t)},e=d3.select("#bubble-chart"),n=document.querySelector(".data__info.data__info--bubble h3"),r=document.querySelectorAll(".data__info.data__info--bubble li span"),t.next=12,e.node().getBoundingClientRect().width;case 12:return a=t.sent,t.next=15,e.node().getBoundingClientRect().height;case 15:return o=t.sent,u=[a,o],t.next=19,d3.nest().key(function(t){return t.inciCat}).rollup(function(t){return t.length}).entries(vlogData);case 19:return i=t.sent,t.next=22,d3.nest().key(function(t){return t.involvedPeople}).rollup(function(t){return t.length}).entries(vlogData);case 22:c=t.sent,l={name:"parent",children:i},d=d3.scaleLinear().domain([1,d3.max(l.children,function(t){return t.value})]).interpolate(d3.interpolateHcl).range([d3.rgb("#8CE2F1"),d3.rgb("#1ac5e3")]),f=d3.pack().size(u).padding(1),s=d3.hierarchy(l).sum(function(t){return t.value}),f(s),(v=e.selectAll("g").data(s.descendants()).enter().append("g")).append("circle").attr("cx",b).attr("cy",k).attr("r",function(t){return t.r}).attr("fill",function(t){return d(t.data.value)}).on("mouseenter",h).on("mouseleave",p),v.append("text").attr("dy",function(t){return k(t)+5}).attr("dx",function(t){return b(t)-25}).text(function(t){return void 0===t.children?t.data.key:""}),g();case 32:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();function _asyncToGenerator(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(a,o){try{var u=e[a](o),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}("next")})}}